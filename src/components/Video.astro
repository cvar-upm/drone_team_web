---
import '../styles/global.css';
const { videoUrl = "https://player.vimeo.com/video/1079143067", title = "Video" } = Astro.props;

const isIframe = videoUrl.includes('player.vimeo.com') || 
                 videoUrl.includes('youtube.com') || 
                 videoUrl.includes('youtu.be') ||
                 videoUrl.startsWith('https://player');

const getVideoType = (url: string) => {
  if (url.endsWith('.webm')) return 'video/webm';
  if (url.endsWith('.ogg')) return 'video/ogg';
  return 'video/mp4';
};
---

<div style="padding: 0rem 0; background: var(--cvar-white);">
  <div class="video-wrapper" style="max-width: 1200px; margin: 0 auto;">
    {isIframe ? (
      <div style="position: relative; padding-bottom: 56.25%; height: 0;">
        <iframe
          src={videoUrl}
          title={title}
          allow="autoplay; fullscreen; picture-in-picture; clipboard-write"
          style="position:absolute; top:0; left:0; width:100%; height:100%; border:0; border-radius: 12px;"
        ></iframe>
      </div>
    ) : (
      <video 
        controls 
        style="width: 100%; border-radius: 12px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);"
        preload="metadata"
      >
        <source src={`${import.meta.env.BASE_URL}${videoUrl}`} type={getVideoType(videoUrl)} />
        Tu navegador no soporta el elemento de video.
      </video>
    )}
  </div>
</div>